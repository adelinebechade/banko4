{% extends 'base.html.twig' %}

{% block title %}
    Compte - {{ compte.nom }}
{% endblock %}
 
{% block body %}
    <main role="main" class="col-md-10 ml-sm-auto col-lg-10 px-4">
        <br />
        <div class="col-md-12">
            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    <div class="alert alert-{{ label }}">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>

                        <span>{{ message|trans }}</span>
                    </div>
                {% endfor %}
            {% endfor %}
        </div>
        <h1>{{ compte.nom }}</h1>
        <h4 class="float-left text-success">Courant : {{ solde_courant }} €</h4>
        <h4 class="float-right text-warning">Prévisionnel : {{ solde_previsionnel }} €</h4>

        <div class="table-responsive">
            <table class="table table-bordered table-sm">
                <thead class="thead-light">
                    <tr>
                        <th class="text-center">{{ 'treated'|trans }}</th>
                        <th class="text-center">{{ 'title'|trans }}</th>
                        <th class="text-center">{{ 'date'|trans }}</th>
                        <th class="text-center">{{ 'credit'|trans }}</th>
                        <th class="text-center">{{ 'debit'|trans }}</th>
                        <th class="text-center">{{ 'actions'|trans }}</th>
                    </tr>
                </thead>
                <tbody>
                {% for mouvement in mouvements %}
                    <tr>
                        <td style="text-align: center;"><a href="#" id="traite{{ mouvement.id }}">{% if mouvement.traite == 1 %}Oui{% else %}Non{% endif %} </a></td>
                        <td><a href="#" id="libelle{{ mouvement.id }}">{{ mouvement.libelle }}</a></td>
                        <td style="text-align: center;"><a href="#" id="date{{ mouvement.id }}">{{ mouvement.date|date("d/m/Y") }}</a></td>
                        <td style="text-align: center;"><a href="#" id="credit{{ mouvement.id }}">{{ mouvement.credit }}</a></td>
                        <td style="text-align: center;"><a href="#" id="debit{{ mouvement.id }}">{{ mouvement.debit }}</a></td>
                        <td style="text-align: center;"><a href="{{ path('mouvement_delete', { 'id': mouvement.id }) }}"><i class="fa fa-trash-alt"></i></a></td>
                    </tr>
                {% else %}
                    <tr>Pas (encore !) de compte</tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="panel-footer">
            {{ include('Elements/_paginate.html.twig', {'pagination': pagination}) }}
        </div>
    </main>

    {#{{ render(controller('BankoCompteBundle:Mouvement:new', {'compte_id': compte.id})) }} #}

   <script type="text/javascript">
      function redirige(value) {
        var url = '{{ path('show', {'compte': 'compte' , 'page': 1}) }}';
        url = url.replace("compte.id", value);
        document.location = url;
      }
  </script>
{% endblock %}
